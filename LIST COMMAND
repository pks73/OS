#include <dirent.h>

void list(char *option, char *dirname) {
    struct dirent *entry;
    DIR *dp = opendir(dirname);
    int count = 0;
    
    if(dp == NULL) {
        printf("Directory not found\n");
        return;
    }
    
    if(strcmp(option, "f") == 0) {
        // List all files
        while((entry = readdir(dp))) {
            printf("%s\n", entry->d_name);
        }
    }
    else if(strcmp(option, "n") == 0) {
        // Count entries
        while((entry = readdir(dp))) {
            count++;
        }
        printf("Total entries: %d\n", count);
    }
    else if(strcmp(option, "i") == 0) {
        // List with inodes
        while((entry = readdir(dp))) {
            printf("%ld %s\n", entry->d_ino, entry->d_name);
        }
    }
    closedir(dp);
}

// In main shell:
if(strcmp(args[0], "list") == 0) {
    list(args[1], args[2]);
    continue;
}
